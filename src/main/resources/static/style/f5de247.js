(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{474:function(e,t,o){"use strict";o.r(t);var l={layout:"layout",head:function(){return{title:"S3存储上传配置"}},data:function(){return{key:"",form:{s3accessKeyId:"",s3secretAccessKey:"",s3bucketName:"",s3region:"",s3endpoint:"",s3UrlPrefix:""}}},beforeDestroy:function(){},created:function(){},mounted:function(){var e=this;localStorage.getItem("webkey")?e.key=localStorage.getItem("webkey"):(e.$message({message:"认证失效！",type:"error"}),e.$router.push({path:"/"})),e.getConfig()},methods:{save:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var o=e.form,data={webkey:e.key,token:t,params:JSON.stringify(o)},l=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$axios.$post(e.$api.apiConfigUpdate(),this.qs.stringify(data)).then((function(t){l.close(),1==t.code?(e.$message({message:t.msg,type:"success"}),e.getConfig()):(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){l.close(),console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfig:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var data={webkey:e.key,token:t};e.$axios.$post(e.$api.getApiConfig(),this.qs.stringify(data)).then((function(t){1==t.code?(e.form.s3accessKeyId=t.data.s3accessKeyId,e.form.s3secretAccessKey=t.data.s3secretAccessKey,e.form.s3bucketName=t.data.s3bucketName,e.form.s3region=t.data.s3region,e.form.s3endpoint=t.data.s3endpoint,e.form.s3UrlPrefix=t.data.s3UrlPrefix):(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))}}},r=o(26),component=Object(r.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"data-box"},[t("div",{staticClass:"page-title"},[t("h4",[e._v("S3存储上传配置")]),e._v(" "),t("p",[e._v("S3(Simple Storage Service)协议是亚马逊推出的一种对象存储服务协议。它为开发者提供了一种简单、高效、可靠的方式来存储和管理大量的数据对象。本接口理论支持所有基于S3协议开发的对象存储，如aws对象存储，Cloudflare R2存储等。")])]),e._v(" "),t("div",{staticClass:"page-form"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"80px"}},[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("accessKeyId")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入S3存储协议accessKeyId"},model:{value:e.form.s3accessKeyId,callback:function(t){e.$set(e.form,"s3accessKeyId",t)},expression:"form.s3accessKeyId"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("secretAccessKey")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入S3存储协议secretAccessKey"},model:{value:e.form.s3secretAccessKey,callback:function(t){e.$set(e.form,"s3secretAccessKey",t)},expression:"form.s3secretAccessKey"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("BucketName存储桶名称")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入S3存储协议bucketName"},model:{value:e.form.s3bucketName,callback:function(t){e.$set(e.form,"s3bucketName",t)},expression:"form.s3bucketName"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("Region地域ID")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入S3存储协议region"},model:{value:e.form.s3region,callback:function(t){e.$set(e.form,"s3region",t)},expression:"form.s3region"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("Endpoint节点地址"),t("span",[e._v("S3对象存储协议endpoint，格式为https://域名")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入S3存储协议endpoint"},model:{value:e.form.s3endpoint,callback:function(t){e.$set(e.form,"s3endpoint",t)},expression:"form.s3endpoint"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("自定义外网域名"),t("span",[e._v("格式为https://域名")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入自定义外网域"},model:{value:e.form.s3UrlPrefix,callback:function(t){e.$set(e.form,"s3UrlPrefix",t)},expression:"form.s3UrlPrefix"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存设置")])],1)],1)],1)])])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);