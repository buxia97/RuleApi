(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{479:function(e,t,l){"use strict";l.r(t);var o={layout:"layout",head:function(){return{title:"短信配置"}},data:function(){return{key:"",form:{codeAccessKeyId:"",codeAccessKeySecret:"",codeEndpoint:"",codeTemplate:"",codeSignName:"",isPhone:!1,smsType:"0",smsbaoUsername:"",smsbaoApikey:"",smsbaoTemplate:"",feigeType:"1",feigeApiKey:"",feigeSecret:"",feigeTemplateId:"",feigeSignId:"",feigeApiUrl:""}}},beforeDestroy:function(){},created:function(){},mounted:function(){var e=this;localStorage.getItem("webkey")?e.key=localStorage.getItem("webkey"):(e.$message({message:"认证失效！",type:"error"}),e.$router.push({path:"/"})),e.getConfig()},methods:{save:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var l=e.form;e.form.isPhone?l.isPhone=1:l.isPhone=0;var data={webkey:e.key,token:t,params:JSON.stringify(l)},o=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$axios.$post(e.$api.apiConfigUpdate(),this.qs.stringify(data)).then((function(t){o.close(),1==t.code?(e.$message({message:t.msg,type:"success"}),e.getConfig()):(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){o.close(),console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfig:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var data={webkey:e.key,token:t};e.$axios.$post(e.$api.getApiConfig(),this.qs.stringify(data)).then((function(t){1==t.code?(e.form.codeAccessKeyId=t.data.codeAccessKeyId,e.form.codeAccessKeySecret=t.data.codeAccessKeySecret,e.form.codeEndpoint=t.data.codeEndpoint,e.form.codeTemplate=t.data.codeTemplate,e.form.smsType=t.data.smsType+"",e.form.smsbaoUsername=t.data.smsbaoUsername,e.form.smsbaoApikey=t.data.smsbaoApikey,e.form.smsbaoTemplate=t.data.smsbaoTemplate,e.form.codeSignName=t.data.codeSignName,e.form.feigeApiKey=t.data.feigeApiKey,e.form.feigeSecret=t.data.feigeSecret,e.form.feigeTemplateId=t.data.feigeTemplateId,e.form.feigeApiUrl=t.data.feigeApiUrl,e.form.feigeSignId=t.data.feigeSignId,t.data.feigeType&&(e.form.feigeType=t.data.feigeType),1==t.data.isPhone?e.form.isPhone=!0:e.form.isPhone=!1):(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))}}},r=l(26),component=Object(r.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"data-box"},[t("div",{staticClass:"page-title"},[t("h4",[e._v("短信配置")]),e._v(" "),t("p",[e._v("目前支持阿里云短信、短信宝短信，和飞鸽云通信。阿里云参考文档："),t("a",{attrs:{href:"https://developer.aliyun.com/article/252987",target:"_blank"}},[e._v("立即前往")]),e._v("。短信宝参考文档："),t("a",{attrs:{href:"https://www.smsbao.com/",target:"_blank"}},[e._v("立即前往")]),e._v("。飞鸽云参考文档："),t("a",{attrs:{href:"https://www.feige.cn/",target:"_blank"}},[e._v("立即前往")])])]),e._v(" "),t("div",{staticClass:"page-form"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"80px"}},[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("是否开启手机号"),t("span",{staticClass:"text-gray"},[e._v("开启后，将新增手机号相关功能")])]),e._v(" "),t("el-switch",{model:{value:e.form.isPhone,callback:function(t){e.$set(e.form,"isPhone",t)},expression:"form.isPhone"}})],1),e._v(" "),t("el-form-item",[t("el-select",{attrs:{placeholder:"短信服务"},model:{value:e.form.smsType,callback:function(t){e.$set(e.form,"smsType",t)},expression:"form.smsType"}},[t("el-option",{attrs:{label:"阿里云",value:"0"}}),e._v(" "),t("el-option",{attrs:{label:"短信宝",value:"1"}}),e._v(" "),t("el-option",{attrs:{label:"飞鸽云通信",value:"2"}})],1)],1),e._v(" "),0==e.form.smsType?[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("阿里云短信AccessKeyId")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入阿里云短信AccessKeyId"},model:{value:e.form.codeAccessKeyId,callback:function(t){e.$set(e.form,"codeAccessKeyId",t)},expression:"form.codeAccessKeyId"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("阿里云短信AccessKeySecret")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入阿里云短信AccessKeySecret"},model:{value:e.form.codeAccessKeySecret,callback:function(t){e.$set(e.form,"codeAccessKeySecret",t)},expression:"form.codeAccessKeySecret"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("阿里云短信请求地址")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入阿里云短信请求地址"},model:{value:e.form.codeEndpoint,callback:function(t){e.$set(e.form,"codeEndpoint",t)},expression:"form.codeEndpoint"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("阿里云短信模板")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入阿里云短信模板ID"},model:{value:e.form.codeTemplate,callback:function(t){e.$set(e.form,"codeTemplate",t)},expression:"form.codeTemplate"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("阿里云短信签名")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入阿里云短信签名"},model:{value:e.form.codeSignName,callback:function(t){e.$set(e.form,"codeSignName",t)},expression:"form.codeSignName"}})],1)]:e._e(),e._v(" "),1==e.form.smsType?[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("短信宝Username")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入短信宝Username"},model:{value:e.form.smsbaoUsername,callback:function(t){e.$set(e.form,"smsbaoUsername",t)},expression:"form.smsbaoUsername"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("短信宝Apikey")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入短信宝Apikey"},model:{value:e.form.smsbaoApikey,callback:function(t){e.$set(e.form,"smsbaoApikey",t)},expression:"form.smsbaoApikey"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("短信宝Template")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入短信宝Template"},model:{value:e.form.smsbaoTemplate,callback:function(t){e.$set(e.form,"smsbaoTemplate",t)},expression:"form.smsbaoTemplate"}})],1)]:e._e(),e._v(" "),2==e.form.smsType?[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("飞鸽云版本")]),e._v(" "),t("el-select",{attrs:{placeholder:"飞鸽云版本"},model:{value:e.form.feigeType,callback:function(t){e.$set(e.form,"feigeType",t)},expression:"form.feigeType"}},[t("el-option",{attrs:{label:"新版",value:"1"}}),e._v(" "),t("el-option",{attrs:{label:"旧版",value:"0"}})],1)],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("飞鸽云接口地址"),t("span",[e._v("如：https://api.4321.sh")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入飞鸽云飞鸽云接口地址"},model:{value:e.form.feigeApiUrl,callback:function(t){e.$set(e.form,"feigeApiUrl",t)},expression:"form.feigeApiUrl"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("飞鸽云Apikey")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入飞鸽云Apikey"},model:{value:e.form.feigeApiKey,callback:function(t){e.$set(e.form,"feigeApiKey",t)},expression:"form.feigeApiKey"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("飞鸽云Secret")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入飞鸽云Secret"},model:{value:e.form.feigeSecret,callback:function(t){e.$set(e.form,"feigeSecret",t)},expression:"form.feigeSecret"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("飞鸽云SignId"),t("span",[e._v("飞鸽旧版国内发信使用，其他可不填")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入SignId"},model:{value:e.form.feigeSignId,callback:function(t){e.$set(e.form,"feigeSignId",t)},expression:"form.feigeSignId"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("飞鸽云TemplateId")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入飞鸽云TemplateId"},model:{value:e.form.feigeTemplateId,callback:function(t){e.$set(e.form,"feigeTemplateId",t)},expression:"form.feigeTemplateId"}})],1)]:e._e(),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存设置")])],1)],2)],1)])])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);