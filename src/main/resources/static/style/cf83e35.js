(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{465:function(e,t,l){"use strict";l.r(t);l(30);var o={layout:"layout",head:function(){return{title:"支付套餐"}},data:function(){return{key:"",packageList:[],curApp:{id:0,name:"",intro:"",price:"",gold:"",integral:"",appleProductId:""},dialogAdd:!1,dialogEdit:!1,form:{name:"",intro:"",price:"",gold:"",integral:"",appleProductId:""}}},beforeDestroy:function(){},created:function(){},mounted:function(){var e=this;localStorage.getItem("webkey")?e.key=localStorage.getItem("webkey"):(e.$message({message:"认证失效！",type:"error"}),e.$router.push({path:"/"})),e.getList()},methods:{goEdit:function(data){this.dialogEdit=!0,this.curApp=data},add:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var l=e.form;if(""==l.name||""==l.price||""==l.gold)return e.$message({message:"参数不能有空值",type:"warning"}),!1;var data={webkey:e.key,token:t,params:JSON.stringify(l)},o=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$axios.$post(e.$api.addPayPackage(),this.qs.stringify(data)).then((function(t){o.close(),1==t.code?(e.dialogAdd=!1,e.$message({message:t.msg,type:"success"}),e.getList()):(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){o.close(),console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},edit:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var l=e.curApp;if(console.log(JSON.stringify(l)),""==l.name||""==l.price||""==l.gold)return e.$message({message:"参数不能有空值",type:"warning"}),!1;var data={webkey:e.key,token:t,params:JSON.stringify(l)},o=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$axios.$post(e.$api.updatePayPackage(),this.qs.stringify(data)).then((function(t){o.close(),1==t.code?(e.dialogEdit=!1,e.$message({message:t.msg,type:"success"}),e.getList()):(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){o.close(),console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},remove:function(e){var t=this,l=this,o="";localStorage.getItem("api_token")&&(o=localStorage.getItem("api_token")),l.$confirm("确认删除该套餐？","操作提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){var data={webkey:l.key,token:o,id:e},r=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});l.$axios.$post(l.$api.deletePayPackage(),t.qs.stringify(data)).then((function(e){r.close(),1==e.code?(l.$message({message:e.msg,type:"success"}),l.getList()):(l.$message({message:e.msg,type:"error"}),"用户未登录或Token验证失败"==e.msg&&localStorage.removeItem("api_token"))})).catch((function(e){r.close(),console.log(e),l.$message({message:"接口请求异常，请检查网络！",type:"error"})}))})).catch((function(){}))},getList:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var data={webkey:e.key,token:t};e.$axios.$post(e.$api.payPackageList(),this.qs.stringify(data)).then((function(t){1==t.code?e.packageList=t.data:(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},goPic:function(e){window.open(e)}}},r=l(26),component=Object(r.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"data-box"},[t("div",{staticClass:"page-title"},[t("h4",[e._v("支付套餐")]),e._v(" "),t("p",[e._v("在这里添加支付套餐，让支付功能规范化")])]),e._v(" "),t("div",{staticClass:"page-concent"},[t("div",{staticClass:"page-operate"},[t("el-button",{attrs:{type:"success"},on:{click:function(t){e.dialogAdd=!0}}},[e._v("添加套餐")])],1),e._v(" "),t("div",{staticClass:"page-list"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.packageList,border:""}},[t("el-table-column",{attrs:{prop:"name",label:"套餐名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"price",label:"套餐价格"}}),e._v(" "),t("el-table-column",{attrs:{prop:"gold",label:"金币到账数量"}}),e._v(" "),t("el-table-column",{attrs:{prop:"integral",label:"积分到账数量"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.goEdit(l.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.remove(l.row.id)}}},[e._v("删除")])]}}])})],1)],1)])])])],1),e._v(" "),t("el-dialog",{attrs:{title:"添加套餐",visible:e.dialogAdd,"modal-append-to-body":!1,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.dialogAdd=t}}},[t("div",{staticClass:"dialog-form"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"80px"}},[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("套餐名称")]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"请输入套餐名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("套餐描述")]),e._v(" "),t("el-input",{attrs:{type:"textarea",placeholder:"请输入套餐名称"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("套餐价格（实际货币）")]),e._v(" "),t("el-input",{attrs:{type:"number",placeholder:"请输入套餐价格，必须为整数"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("金币到账数量")]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"请输入金币到账数量，必须为整数"},model:{value:e.form.gold,callback:function(t){e.$set(e.form,"gold",t)},expression:"form.gold"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("积分到账数量")]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"请输入积分到账数量，必须为整数"},model:{value:e.form.integral,callback:function(t){e.$set(e.form,"integral",t)},expression:"form.integral"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("Apple产品ID")]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"Apple支付专用，其他支付可不填"},model:{value:e.form.appleProductId,callback:function(t){e.$set(e.form,"appleProductId",t)},expression:"form.appleProductId"}})],1)],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogAdd=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("确认添加")])],1)]),e._v(" "),t("el-dialog",{attrs:{title:"编辑套餐",visible:e.dialogEdit,"modal-append-to-body":!1,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.dialogEdit=t}}},[t("div",{staticClass:"dialog-form"},[t("el-form",{ref:"form",attrs:{model:e.curApp,"label-position":"top","label-width":"80px"}},[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("套餐ID")]),e._v(" "),t("el-input",{attrs:{value:e.curApp.id,type:"text",disabled:""}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("套餐名称")]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"请输入套餐名称"},model:{value:e.curApp.name,callback:function(t){e.$set(e.curApp,"name",t)},expression:"curApp.name"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("套餐描述")]),e._v(" "),t("el-input",{attrs:{type:"textarea",placeholder:"请输入套餐名称"},model:{value:e.curApp.intro,callback:function(t){e.$set(e.curApp,"intro",t)},expression:"curApp.intro"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("套餐价格")]),e._v(" "),t("el-input",{attrs:{type:"number",placeholder:"请输入套餐价格，必须为整数"},model:{value:e.curApp.price,callback:function(t){e.$set(e.curApp,"price",t)},expression:"curApp.price"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("金币到账数量")]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"请输入金币到账数量，必须为整数"},model:{value:e.curApp.gold,callback:function(t){e.$set(e.curApp,"gold",t)},expression:"curApp.gold"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("积分到账数量")]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"请输入积分到账数量，必须为整数"},model:{value:e.curApp.integral,callback:function(t){e.$set(e.curApp,"integral",t)},expression:"curApp.integral"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("Apple产品ID")]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"Apple支付专用，其他支付可不填"},model:{value:e.curApp.appleProductId,callback:function(t){e.$set(e.curApp,"appleProductId",t)},expression:"curApp.appleProductId"}})],1)],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.edit()}}},[e._v("保存修改")])],1)])],1)}),[],!1,null,null,null);t.default=component.exports}}]);