(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{440:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},442:function(e,t,o){"use strict";var r=o(2),l=o(443).trim;r({target:"String",proto:!0,forced:o(444)("trim")},{trim:function(){return l(this)}})},443:function(e,t,o){var r=o(5),l=o(25),n=o(13),m=o(440),c=r("".replace),f="["+m+"]",d=RegExp("^"+f+f+"*"),h=RegExp(f+f+"*$"),v=function(e){return function(t){var o=n(l(t));return 1&e&&(o=c(o,d,"")),2&e&&(o=c(o,h,"")),o}};e.exports={start:v(1),end:v(2),trim:v(3)}},444:function(e,t,o){var r=o(94).PROPER,l=o(3),n=o(440);e.exports=function(e){return l((function(){return!!n[e]()||"​᠎"!=="​᠎"[e]()||r&&n[e].name!==e}))}},451:function(e,t,o){"use strict";o.r(t);o(442),o(31),o(95),o(96),o(280),o(189),o(43),o(16),o(57);var r={layout:"layout",head:function(){return{title:"授权控制中心"}},data:function(){return{key:"",authorizeCode:"",domain:"",domainList:[],form:{authorizeType:"0",authorizeBanText:"",authorizeDomain:"",authorizeAppVersion:"",authorizeAppDt:"",authorizeApiDt:"",ruleapiVersion:"",ruleapiVersionCode:""}}},beforeDestroy:function(){},created:function(){},mounted:function(){var e=this;localStorage.getItem("webkey")?e.key=localStorage.getItem("webkey"):(e.$message({message:"认证失效！",type:"error"}),e.$router.push({path:"/"})),e.getConfig()},methods:{addDomain:function(){var e=this,t=e.domain.trim().toLowerCase();t?/^[a-zA-Z0-9.-]+$/.test(t)?e.domainList.includes(t)?this.$message.error("域名已存在，不能重复添加"):(e.domainList.unshift(t),e.domain=""):this.$message.error("域名格式不合法，只能包含字母、数字、短横线(-)和点(.)"):this.$message.error("域名不能为空")},removeDomain:function(e){this.domainList.splice(e,1)},save:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var o=e.form,r=this.domainList.join(",");o.authorizeDomain=r;var data={webkey:e.key,token:t,params:JSON.stringify(o)},l=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$axios.$post(e.$api.apiConfigUpdate(),this.qs.stringify(data)).then((function(t){l.close(),1==t.code?(e.$message({message:t.msg,type:"success"}),e.getConfig()):(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){l.close(),console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfig:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var data={webkey:e.key,token:t};e.$axios.$post(e.$api.getApiConfig(),this.qs.stringify(data)).then((function(t){1==t.code?(e.form.authorizeType=t.data.authorizeType,e.form.authorizeBanText=t.data.authorizeBanText,e.form.authorizeAppVersion=t.data.authorizeAppVersion,e.form.authorizeAppDt=t.data.authorizeAppDt,e.form.authorizeApiDt=t.data.authorizeApiDt,e.form.ruleapiVersion=t.data.ruleapiVersion,e.form.ruleapiVersionCode=t.data.ruleapiVersionCode,t.data.authorizeDomain&&(e.domainList=t.data.authorizeDomain.split(",").map((function(s){return s.trim()})).filter((function(s){return s.length})))):(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getAuthorizeCode:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var data={webkey:e.key,token:t,url:e.authorizeCode};e.$axios.$post(e.$api.getAuthorizeCode(),this.qs.stringify(data)).then((function(t){1==t.code?e.authorizeCode=t.data:(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))}}},l=o(26),component=Object(l.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"data-box"},[t("div",{staticClass:"page-title"},[t("h4",[e._v("授权控制中心")]),e._v(" "),t("p",[e._v("该功能仅商业版可用，在此处选择授权的模式，设置被授权站点的域名和内容违禁词。仅API域名需要授权。")])]),e._v(" "),t("div",{staticClass:"page-form"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"80px"}},[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("授权模式"),t("span",[e._v("白名单模式：仅白名单域名可用API。黑名单模式：仅黑名单域名不可用API。选择后不要轻易切换！")])]),e._v(" "),t("el-radio-group",{model:{value:e.form.authorizeType,callback:function(t){e.$set(e.form,"authorizeType",t)},expression:"form.authorizeType"}},[t("el-radio",{attrs:{label:"0"}},[e._v("白名单模式")]),e._v(" "),t("el-radio",{attrs:{label:"1"}},[e._v("黑名单模式")])],1)],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("内容违禁词"),t("span",[e._v("以英文逗号','分割，设置完成后，授权域名下API不可发送带违禁词内容。")])]),e._v(" "),t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容违禁词"},model:{value:e.form.authorizeBanText,callback:function(t){e.$set(e.form,"authorizeBanText",t)},expression:"form.authorizeBanText"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("域名列表"),t("span",[e._v("输入域名后点击新增，注意授权模式的选择。")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入域名"},model:{value:e.domain,callback:function(t){e.domain=t},expression:"domain"}},[t("template",{slot:"append"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addDomain()}}},[e._v("新增")])],1)],2)],1),e._v(" "),t("el-form-item",e._l(e.domainList,(function(o,r){return t("el-tag",{key:r,staticStyle:{"margin-right":"5px"}},[e._v("\n                "+e._s(o)+" "),t("i",{staticClass:"el-icon-close",on:{click:function(t){return e.removeDomain(r)}}})])})),1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("商业版授权管控码"),t("span",[e._v("输入API地址，生成管控码，如https://www.baidu.com/，不要忘记结尾的斜杠")])]),e._v(" "),t("el-input",{attrs:{placeholder:"API地址，输入后点击生成，之后即可复制用于授权下级API"},model:{value:e.authorizeCode,callback:function(t){e.authorizeCode=t},expression:"authorizeCode"}},[t("template",{slot:"append"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getAuthorizeCode()}}},[e._v("生成")])],1)],2)],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("APP版本号"),t("span",[e._v("如V1.0.0")])]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"请输入APP版本号"},model:{value:e.form.authorizeAppVersion,callback:function(t){e.$set(e.form,"authorizeAppVersion",t)},expression:"form.authorizeAppVersion"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("APP源码更新地址"),t("span")]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"请输入APP源码更新地址"},model:{value:e.form.authorizeAppDt,callback:function(t){e.$set(e.form,"authorizeAppDt",t)},expression:"form.authorizeAppDt"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("API源码更新地址"),t("span")]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"请输入内容违禁词"},model:{value:e.form.authorizeApiDt,callback:function(t){e.$set(e.form,"authorizeApiDt",t)},expression:"form.authorizeApiDt"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("API版本号"),t("span",[e._v("如V1.0.0")])]),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"请输入内容违禁词"},model:{value:e.form.ruleapiVersion,callback:function(t){e.$set(e.form,"ruleapiVersion",t)},expression:"form.ruleapiVersion"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("API版本码"),t("span",[e._v("只允许整数，如10")])]),e._v(" "),t("el-input",{attrs:{type:"number",placeholder:"请输入内容违禁词"},model:{value:e.form.ruleapiVersionCode,callback:function(t){e.$set(e.form,"ruleapiVersionCode",t)},expression:"form.ruleapiVersionCode"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存设置")])],1)],1)],1)])])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);