(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{466:function(e,t,o){"use strict";o.r(t);var l={layout:"layout",head:function(){return{title:"支付参数设置"}},data:function(){return{key:"",form:{scale:"100",minPayNum:"5",switchAlipay:!0,switchWxpay:!0,switchEpay:!0,switchApplepay:!0,switchTokenpay:!0}}},beforeDestroy:function(){},created:function(){},mounted:function(){var e=this;localStorage.getItem("webkey")?e.key=localStorage.getItem("webkey"):(e.$message({message:"认证失效！",type:"error"}),e.$router.push({path:"/"})),e.getConfig()},methods:{save:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var o=e.form;e.form.switchAlipay?o.switchAlipay="1":o.switchAlipay="0",e.form.switchWxpay?o.switchWxpay="1":o.switchWxpay="0",e.form.switchEpay?o.switchEpay="1":o.switchEpay="0",e.form.switchApplepay?o.switchApplepay="1":o.switchApplepay="0",e.form.switchTokenpay?o.switchTokenpay="1":o.switchTokenpay="0";var data={webkey:e.key,token:t,params:JSON.stringify(o)},l=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$axios.$post(e.$api.apiConfigUpdate(),this.qs.stringify(data)).then((function(t){l.close(),1==t.code?(e.$message({message:t.msg,type:"success"}),e.getConfig()):(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){l.close(),console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfig:function(){var e=this,t="";localStorage.getItem("api_token")&&(t=localStorage.getItem("api_token"));var data={webkey:e.key,token:t};e.$axios.$post(e.$api.getApiConfig(),this.qs.stringify(data)).then((function(t){1==t.code?(t.data.scale&&(e.form.scale=t.data.scale),t.data.minPayNum&&(e.form.minPayNum=t.data.minPayNum),t.data.switchAlipay&&("1"==t.data.switchAlipay?e.form.switchAlipay=!0:e.form.switchAlipay=!1),t.data.switchWxpay&&("1"==t.data.switchWxpay?e.form.switchWxpay=!0:e.form.switchWxpay=!1),t.data.switchEpay&&("1"==t.data.switchEpay?e.form.switchEpay=!0:e.form.switchEpay=!1),t.data.switchApplepay&&("1"==t.data.switchApplepay?e.form.switchApplepay=!0:e.form.switchApplepay=!1),t.data.switchTokenpay&&("1"==t.data.switchTokenpay?e.form.switchTokenpay=!0:e.form.switchTokenpay=!1)):(e.$message({message:t.msg,type:"error"}),"用户未登录或Token验证失败"==t.msg&&localStorage.removeItem("api_token"))})).catch((function(t){console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))}}},c=o(26),component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"data-box"},[t("div",{staticClass:"page-title"},[t("h4",[e._v("支付参数设置")]),e._v(" "),t("p",[e._v("控制支付渠道的开关。")])]),e._v(" "),t("div",{staticClass:"page-form"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"80px"}},[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("金币充值比例"),t("span",[e._v("必须为整数，一元钱等于多少金币")])]),e._v(" "),t("el-input",{attrs:{type:"number",placeholder:"请输入金币充值比例"},model:{value:e.form.scale,callback:function(t){e.$set(e.form,"scale",t)},expression:"form.scale"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("最小充值金额"),t("span",[e._v("为法币金额，必须为正整数")])]),e._v(" "),t("el-input",{attrs:{type:"number",placeholder:"请输入最小充值金额"},model:{value:e.form.minPayNum,callback:function(t){e.$set(e.form,"minPayNum",t)},expression:"form.minPayNum"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("支付功能开关")]),e._v(" "),t("el-checkbox",{model:{value:e.form.switchAlipay,callback:function(t){e.$set(e.form,"switchAlipay",t)},expression:"form.switchAlipay"}},[e._v("支付宝")]),e._v(" "),t("el-checkbox",{model:{value:e.form.switchWxpay,callback:function(t){e.$set(e.form,"switchWxpay",t)},expression:"form.switchWxpay"}},[e._v("微信支付")]),e._v(" "),t("el-checkbox",{model:{value:e.form.switchEpay,callback:function(t){e.$set(e.form,"switchEpay",t)},expression:"form.switchEpay"}},[e._v("易支付")]),e._v(" "),t("el-checkbox",{model:{value:e.form.switchApplepay,callback:function(t){e.$set(e.form,"switchApplepay",t)},expression:"form.switchApplepay"}},[e._v("苹果支付")]),e._v(" "),t("el-checkbox",{model:{value:e.form.switchTokenpay,callback:function(t){e.$set(e.form,"switchTokenpay",t)},expression:"form.switchTokenpay"}},[e._v("卡密支付")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存设置")])],1)],1)],1)])])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);