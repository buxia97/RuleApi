(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{475:function(e,l,o){"use strict";o.r(l);var t={layout:"layout",head:function(){return{title:"用户参数设置"}},data:function(){return{key:"",form:{imageCompression:"0",imageCompressionLv:"1080",webinfoUploadUrl:"",localPath:"",uploadType:"local",uploadLevel:"0",uploadPicMax:0,uploadMediaMax:0,uploadFilesMax:0}}},beforeDestroy:function(){},created:function(){},mounted:function(){var e=this;localStorage.getItem("webkey")?e.key=localStorage.getItem("webkey"):(e.$message({message:"认证失效！",type:"error"}),e.$router.push({path:"/"})),e.getConfig()},methods:{save:function(){var e=this,l="";localStorage.getItem("api_token")&&(l=localStorage.getItem("api_token"));var o=e.form,t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),data={webkey:e.key,token:l,params:JSON.stringify(o)};e.$axios.$post(e.$api.apiConfigUpdate(),this.qs.stringify(data)).then((function(l){t.close(),1==l.code?(e.$message({message:l.msg,type:"success"}),e.getConfig()):(e.$message({message:l.msg,type:"error"}),"用户未登录或Token验证失败"==l.msg&&localStorage.removeItem("api_token"))})).catch((function(l){t.close(),console.log(l),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfig:function(){var e=this,l="";localStorage.getItem("api_token")&&(l=localStorage.getItem("api_token"));var data={webkey:e.key,token:l};e.$axios.$post(e.$api.getApiConfig(),this.qs.stringify(data)).then((function(l){1==l.code?(e.form.uploadType=l.data.uploadType,e.form.webinfoUploadUrl=l.data.webinfoUploadUrl,l.data.uploadLevel&&(e.form.uploadLevel=l.data.uploadLevel+""),e.form.localPath=l.data.localPath,e.form.uploadPicMax=l.data.uploadPicMax,e.form.uploadMediaMax=l.data.uploadMediaMax,e.form.uploadFilesMax=l.data.uploadFilesMax,l.data.imageCompression&&(e.form.imageCompression=l.data.imageCompression),l.data.imageCompressionLv&&(e.form.imageCompressionLv=l.data.imageCompressionLv)):(e.$message({message:l.msg,type:"error"}),"用户未登录或Token验证失败"==l.msg&&localStorage.removeItem("api_token"))})).catch((function(l){console.log(l),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))}}},r=o(26),component=Object(r.a)(t,(function(){var e=this,l=e._self._c;return l("div",{staticClass:"page-container"},[l("el-row",{attrs:{gutter:15}},[l("el-col",{attrs:{span:24}},[l("div",{staticClass:"data-box"},[l("div",{staticClass:"page-title"},[l("h4",[e._v("上传参数设置")]),e._v(" "),l("p",[e._v("在这里设置上传通道，部分上传方式的访问域名")])]),e._v(" "),l("div",{staticClass:"page-form"},[l("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"80px"}},[l("el-form-item",[l("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("上传通道"),l("span",[e._v("除选择的外，其它通道都将关闭")])]),e._v(" "),l("el-select",{attrs:{placeholder:"请选择上传通道"},model:{value:e.form.uploadType,callback:function(l){e.$set(e.form,"uploadType",l)},expression:"form.uploadType"}},[l("el-option",{attrs:{label:"本地上传",value:"local"}}),e._v(" "),l("el-option",{attrs:{label:"腾讯云COS",value:"cos"}}),e._v(" "),l("el-option",{attrs:{label:"阿里云OSS",value:"oss"}}),e._v(" "),l("el-option",{attrs:{label:"七牛存储",value:"qiniu"}}),e._v(" "),l("el-option",{attrs:{label:"远程FTP",value:"ftp"}}),e._v(" "),l("el-option",{attrs:{label:"S3通用协议",value:"s3"}})],1)],1),e._v(" "),l("el-form-item",[l("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("文件上传限制")]),e._v(" "),l("el-select",{attrs:{placeholder:"请选择评论审核等级"},model:{value:e.form.uploadLevel,callback:function(l){e.$set(e.form,"uploadLevel",l)},expression:"form.uploadLevel"}},[l("el-option",{attrs:{label:"关闭文件上传",value:"1"}}),e._v(" "),l("el-option",{attrs:{label:"图片上传",value:"0"}}),e._v(" "),l("el-option",{attrs:{label:"图片和视频上传",value:"2"}}),e._v(" "),l("el-option",{attrs:{label:"不限制类型",value:"3"}})],1)],1),e._v(" "),l("el-form-item",[l("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("图片压缩")]),e._v(" "),l("el-select",{attrs:{placeholder:"请选择图片压缩开关"},model:{value:e.form.imageCompression,callback:function(l){e.$set(e.form,"imageCompression",l)},expression:"form.imageCompression"}},[l("el-option",{attrs:{label:"不压缩",value:"0"}}),e._v(" "),l("el-option",{attrs:{label:"VIP不压缩",value:"1"}}),e._v(" "),l("el-option",{attrs:{label:"开启压缩",value:"2"}})],1)],1),e._v(" "),l("el-form-item",[l("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("压缩等级"),l("span",[e._v("开启压缩后生效，等级越低图片越清晰，但越大")])]),e._v(" "),l("el-select",{attrs:{placeholder:"请选择图片压缩等级"},model:{value:e.form.imageCompressionLv,callback:function(l){e.$set(e.form,"imageCompressionLv",l)},expression:"form.imageCompressionLv"}},[l("el-option",{attrs:{label:"极低",value:"1200"}}),e._v(" "),l("el-option",{attrs:{label:"低",value:"1080"}}),e._v(" "),l("el-option",{attrs:{label:"中",value:"720"}}),e._v(" "),l("el-option",{attrs:{label:"高",value:"480"}})],1)],1),e._v(" "),l("el-form-item",[l("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("本地&ftp图片访问地址"),l("span",[e._v("本地上传接口或者FTP上传接口的访问地址")])]),e._v(" "),l("el-input",{attrs:{placeholder:"请输入本地图片访问地址"},model:{value:e.form.webinfoUploadUrl,callback:function(l){e.$set(e.form,"webinfoUploadUrl",l)},expression:"form.webinfoUploadUrl"}})],1),e._v(" "),l("el-form-item",[l("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("本地存储地址"),l("span",[e._v("填写后生效，Linux可填写/opt/files/static，Windows需开放文件夹权限")])]),e._v(" "),l("el-input",{attrs:{placeholder:"请输入本地图片访问地址"},model:{value:e.form.localPath,callback:function(l){e.$set(e.form,"localPath",l)},expression:"form.localPath"}})],1),e._v(" "),l("el-form-item",[l("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("图片最大上传大小"),l("span",[e._v("单位MB，只允许整数")])]),e._v(" "),l("el-input",{attrs:{type:"number",placeholder:"请输入图片最大上传大小"},model:{value:e.form.uploadPicMax,callback:function(l){e.$set(e.form,"uploadPicMax",l)},expression:"form.uploadPicMax"}})],1),e._v(" "),l("el-form-item",[l("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("媒体最大上传大小"),l("span",[e._v("单位MB，只允许整数")])]),e._v(" "),l("el-input",{attrs:{type:"number",placeholder:"请输入媒体最大上传大小"},model:{value:e.form.uploadMediaMax,callback:function(l){e.$set(e.form,"uploadMediaMax",l)},expression:"form.uploadMediaMax"}})],1),e._v(" "),l("el-form-item",[l("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("其他文件最大上传大小"),l("span",[e._v("单位MB，只允许整数")])]),e._v(" "),l("el-input",{attrs:{type:"number",placeholder:"请输入其他文件最大上传大小"},model:{value:e.form.uploadFilesMax,callback:function(l){e.$set(e.form,"uploadFilesMax",l)},expression:"form.uploadFilesMax"}})],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(l){return e.save()}}},[e._v("保存设置")])],1)],1)],1)])])],1)],1)}),[],!1,null,null,null);l.default=component.exports}}]);