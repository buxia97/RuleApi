(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{446:function(t,l,e){"use strict";e.r(l);var n=e(29),o=(e(55),e(31),e(97),e(75),{layout:"layout",head:function(){return{title:"首页"}},data:function(){var t;return t={ruleNews:[],key:"",systemStatus:0,sysTest:!1,cleanTest:!1,dataTest:!1},Object(n.a)(t,"key",""),Object(n.a)(t,"installStatus",0),Object(n.a)(t,"goInstall",!1),Object(n.a)(t,"installData",""),Object(n.a)(t,"isPro",0),t},beforeDestroy:function(){},created:function(){this.isPro=this.$api.isPro()},mounted:function(){this.getRuleNews()},methods:{Install:function(){this.installStatus=0,this.goInstall=!0},goLinks:function(link){window.open(link)},getRuleNews:function(){var t=this,data={searchParams:JSON.stringify({mid:762,type:"post"}),limit:4,page:1,order:"created"};t.$axios.$post(t.$api.getRuleNews(),this.qs.stringify(data)).then((function(l){t.ruleNews=l.data})).catch((function(t){console.log(t)}))},formatDate:function(t){return(t=new Date(parseInt(1e3*t))).getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)},subText:function(text,t){return text.length<null?text.substring(0,t)+"……":text},replaceSpecialChar:function(text){return text=(text=(text=(text=(text=text.replace(/&quot;/g,'"')).replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&nbsp;/g," ")},goInstallStart:function(){var t=this,data=(t.key,{webkey:t.key});t.installStatus=1,t.$axios.$post(t.$api.newInstall(),this.qs.stringify(data),{progress:!1}).then((function(l){t.installStatus=2,t.installData=l,1==t.isPro&&setTimeout((function(){t.installData="正在完成Pro版部分更新，请稍等...",t.goInstallPro()}),500)})).catch((function(l){t.installStatus=2,t.installData="常规更新异常，请重试！"}))},goInstallPro:function(){var t=this,data=(t.key,{webkey:t.key});t.$axios.$post(t.$api.proInstall(),this.qs.stringify(data),{progress:!1}).then((function(l){t.installData=l.msg})).catch((function(l){t.installData="Pro部分更新异常，请重试！"}))},isInstall:function(){var t=this;t.installStatus=1,t.$axios.$get(t.$api.isInstall()).then((function(l){t.installStatus=2;var e=l.code;1==e&&(t.installData="系统运行正常！"),100==e&&(t.installData="Redis连接失败或未安装，请确认您的服务器是否安装Redis，并检查RuleApi配置文件中的连接信息。"),101==e&&(t.installData="检测到你未载入初始表，你可以选择在同一个数据库安装Typecho程序后刷新此页面，或者点击下方按钮独立安装。如非首次安装出现此提示，您可以检查RuleApi配置文件中的数据库前缀配置。"),102==e&&(t.installData="Mysql数据库连接失败或未安装，请确认您的服务器是否安装Mysql，并检查RuleApi配置文件中的连接信息。"),103==e&&(t.installData="检测到你未安装RuleApi附加表，您可以点击如下按钮，为数据库载入附加表。"),104==e&&(t.installData="检测到你的之前版本为1.X版本，请通过如下按钮，同步1.X配置到当前版本，以防数据丢失。"),104==e&&(t.installData="检测到您的JAR包已更新，请点击“刷新数据表”完成升级。")})).catch((function(l){t.installStatus=2,console.log(l),t.$message({message:"接口请求异常，请检查数据库连接或设备网络！",type:"error"})}))},cleanRedis:function(){var t=this,data=(t.key,{webkey:t.key});t.installStatus=1,t.$axios.$post(t.$api.cleanRedis(),this.qs.stringify(data),{progress:!1}).then((function(l){t.installStatus=2,t.installData=l.msg})).catch((function(l){t.installStatus=2,t.installData="Pro部分更新异常，请重试！"}))}}}),c=e(26),component=Object(c.a)(o,(function(){var t=this,l=t._self._c;return l("div",{staticClass:"page-container"},[l("el-row",{attrs:{gutter:15}},[l("el-col",{attrs:{span:24}},[l("div",{staticClass:"data-box"},[l("div",{staticClass:"home-title"},[l("h3",[t._v("欢迎使用RuleApi")]),t._v(" "),l("p",[t._v("一款功能全面的综合性社区/内容/知识付费API程序，始终坚持开源免费，为每个有想法的人，提供创建自己应用的最初动力，目前可支持对接Typecho程序网站或独立运行。")]),t._v(" "),l("p",[t._v("开源不易，如果你觉得好用的话，欢迎通过下方按钮赞助开发者。")])]),t._v(" "),l("div",{staticClass:"home-operate"},[l("el-row",[l("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:function(l){t.Install(),t.installStatus=0}}},[t._v("刷新数据表")]),t._v(" "),l("el-button",{attrs:{type:"danger",icon:"el-icon-cpu"},on:{click:function(l){t.sysTest=!0,t.installStatus=0}}},[t._v("系统自检")]),t._v(" "),l("el-button",{attrs:{type:"danger",icon:"el-icon-magic-stick"},on:{click:function(l){t.cleanTest=!0,t.installStatus=0}}},[t._v("清除缓存")])],1),t._v(" "),l("br"),t._v(" "),l("el-row",[l("el-button",{attrs:{type:"primary",icon:"el-icon-document"},on:{click:function(l){return t.goLinks("https://www.yuque.com/buxia97/ruleproject")}}},[t._v("教程文档")]),t._v(" "),l("el-button",{attrs:{type:"success",icon:"el-icon-user"},on:{click:function(l){return t.goLinks("https://jq.qq.com/?_wv=1027&k=tzDllRvf")}}},[t._v("QQ交流群")]),t._v(" "),l("el-button",{staticClass:"github-bg",attrs:{icon:"el-icon-view"},on:{click:function(l){return t.goLinks("https://github.com/buxia97/RuleApi")}}},[t._v("开源地址")]),t._v(" "),l("el-button",{staticClass:"money-bg",attrs:{icon:"el-icon-thumb"},on:{click:function(l){return t.goLinks("https://www.ruletree.club/sponsor.html")}}},[t._v("赞助作者")])],1)],1)])])],1),t._v(" "),l("el-row",{attrs:{gutter:15}},[l("el-col",{attrs:{lg:12,md:24}},[l("div",{staticClass:"data-box"},[l("div",{staticClass:"data-box-title"},[l("h4",[t._v("官方公告和教程\n          "),l("a",{attrs:{href:"https://www.ruletree.club/tag/RuleApi/",target:"_blank"}},[t._v("查看全部\n            "),l("i",{staticClass:"el-icon-arrow-right"})])])]),t._v(" "),l("div",{staticClass:"home-news"},[0==t.ruleNews.length?l("el-skeleton",{attrs:{rows:6,animated:""}}):t._e(),t._v(" "),t._l(t.ruleNews,(function(e,n){return t.ruleNews.length>0?l("div",{staticClass:"news-box"},[l("a",{attrs:{href:"https://www.ruletree.club/archives/"+e.cid,target:"_blank"}},[l("h5",[t._v(t._s(t.replaceSpecialChar(e.title)))]),t._v(" "),l("p",{staticClass:"news-intro"},[t._v("\n                "+t._s(t.subText(e.text,80))+"\n              ")]),t._v(" "),l("p",{staticClass:"news-date"},[t._v(t._s(t.formatDate(e.created)))])])]):t._e()}))],2)])]),t._v(" "),l("el-col",{attrs:{lg:12,md:24}},[l("div",{staticClass:"data-box"},[l("div",{staticClass:"data-box-title"},[l("h4",[t._v("官方及二开应用\n          "),l("a",{attrs:{href:"javascript:;"},on:{click:function(l){return t.goLinks("https://jq.qq.com/?_wv=1027&k=tzDllRvf")}}},[t._v("我要添加？")])])]),t._v(" "),l("div",{staticClass:"home-app"},[l("div",{staticClass:"app-box"},[l("div",{staticClass:"app-ico"},[l("div",{staticClass:"ico-box"},[t._v("\n                Rule"),l("span",{staticStyle:{color:"#22ac38"}},[t._v("APP")])])]),t._v(" "),l("div",{staticClass:"app-text"},[l("p",[l("span",{staticClass:"official-tips"},[t._v("官方")]),t._v("RuleApp，这是一款开源免费，界面美观的博客/文章/自媒体/新闻资讯/知识付费程序。集VIP会员体系，在线投稿（内置Mardown编辑器），积分商城，付费阅读等模块，基于Typecho开发。")]),t._v(" "),l("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(l){return t.goLinks("https://ext.dcloud.net.cn/plugin?id=6909")}}},[t._v("点击前往")])],1)]),t._v(" "),l("div",{staticClass:"app-box"},[l("div",{staticClass:"app-ico"},[l("div",{staticClass:"ico-box"},[t._v("\n                Rule"),l("span",{staticStyle:{color:"#2299DD"}},[t._v("User")])])]),t._v(" "),l("div",{staticClass:"app-text"},[l("p",[l("span",{staticClass:"official-tips"},[t._v("官方")]),t._v("RuleUser，一款基于Typecho的独立会员中心界面，后端接口采用RuleAPI，集成注册登录，扫码登录，在线投稿，商品发布，消息管理，在线充值和申请提现等。")]),t._v(" "),l("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(l){return t.goLinks("https://www.ruletree.club/archives/2979/")}}},[t._v("点击前往")])],1)]),t._v(" "),l("div",{staticClass:"app-box"},[l("div",{staticClass:"app-ico"},[l("div",{staticClass:"ico-box"},[t._v("\n               Star"),l("span",{staticStyle:{color:"#00ab00"}},[t._v("Pro")])])]),t._v(" "),l("div",{staticClass:"app-text"},[l("p",[l("span",{staticClass:"official-tips"},[t._v("授权二开")]),t._v("StarPro，简约唯美的社区，在RuleAPP的基础上进行了页面优化和功能升级，风格更符合年轻人的审美，新增功能主要包括，签到系统，独立云控后台管理系统，还有其他一些细节优化。")]),t._v(" "),l("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(l){return t.goLinks("https://www.yuque.com/buxia97/ruleproject/qgzo3th3ogalbtbf")}}},[t._v("点击前往")])],1)]),t._v(" "),l("div",{staticClass:"app-box"},[l("div",{staticClass:"app-ico"},[l("div",{staticClass:"ico-box"},[t._v("\n               Box"),l("span",{staticStyle:{color:"#d300d3"}},[t._v("Pro")])])]),t._v(" "),l("div",{staticClass:"app-text"},[l("p",[l("span",{staticClass:"official-tips"},[t._v("授权二开")]),t._v("酱爆'Box Pro，让软件仓库社区运营更加简单，是基于原生RuleAPI Pro二次开发的程序(并非其他需要非官方运行环境)升级版本。")]),t._v(" "),l("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(l){return t.goLinks("https://www.yuque.com/buxia97/ruleproject/qgzo3th3ogalbtbf")}}},[t._v("点击前往")])],1)])])])])],1),t._v(" "),l("el-dialog",{attrs:{title:"清除缓存",visible:t.cleanTest,"close-on-click-modal":!1,"modal-append-to-body":!1,width:"400px"},on:{"update:visible":function(l){t.cleanTest=l}}},[0==t.installStatus?l("div",{staticClass:"dialog-form"},[l("p",{staticClass:"dialog-tips"},[t._v("执行后，将清除API的所有Redis缓存，用于修正缓存问题，但可能导致服务器性能压力短时间骤升！")]),t._v(" "),l("el-input",{attrs:{placeholder:"请输入管理Key",type:"password"},model:{value:t.key,callback:function(l){t.key=l},expression:"key"}})],1):t._e(),t._v(" "),1==t.installStatus?l("div",{staticClass:"install-loading"},[l("p",[t._v("正在执行，请勿关闭窗口或刷新页面！")])]):t._e(),t._v(" "),2==t.installStatus?l("div",{staticClass:"install-data"},[l("div",{staticClass:"install-data-text"},[t._v("\n        "+t._s(t.installData)+"\n      ")])]):t._e(),t._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(l){t.cleanTest=!1,t.installStatus=0}}},[t._v("取 消")]),t._v(" "),2==t.installStatus?l("el-button",{attrs:{type:"danger"},on:{click:function(l){t.installStatus=0}}},[t._v("重 试")]):t._e(),t._v(" "),0==t.installStatus?l("el-button",{attrs:{type:"primary"},on:{click:function(l){return t.cleanRedis()}}},[t._v("确 定")]):t._e()],1)]),t._v(" "),l("el-dialog",{attrs:{title:"系统自检",visible:t.sysTest,"modal-append-to-body":!1,"close-on-click-modal":!1,width:"400px"},on:{"update:visible":function(l){t.sysTest=l}}},[0==t.installStatus?l("div",{staticClass:"dialog-form"},[l("p",{staticClass:"dialog-tips"},[t._v("执行后，将检查数据库、Redis的连接是否正常，系统是否存在未知问题！")]),t._v(" "),l("el-input",{attrs:{placeholder:"请输入管理Key",type:"password"},model:{value:t.key,callback:function(l){t.key=l},expression:"key"}})],1):t._e(),t._v(" "),1==t.installStatus?l("div",{staticClass:"install-loading"},[l("p",[t._v("正在执行，请勿关闭窗口或刷新页面！")])]):t._e(),t._v(" "),2==t.installStatus?l("div",{staticClass:"install-data"},[l("div",{staticClass:"install-data-text"},[t._v("\n        "+t._s(t.installData)+"\n      ")])]):t._e(),t._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(l){t.sysTest=!1,t.installStatus=0}}},[t._v("取 消")]),t._v(" "),2==t.installStatus?l("el-button",{attrs:{type:"danger"},on:{click:function(l){t.installStatus=0}}},[t._v("重 试")]):t._e(),t._v(" "),0==t.installStatus?l("el-button",{attrs:{type:"primary"},on:{click:function(l){return t.isInstall()}}},[t._v("确 定")]):t._e()],1)]),t._v(" "),l("el-dialog",{attrs:{title:"数据表刷新",visible:t.goInstall,"close-on-click-modal":!1,"modal-append-to-body":!1,width:"400px"},on:{"update:visible":function(l){t.goInstall=l}}},[0==t.installStatus?l("div",{staticClass:"dialog-form"},[l("p",{staticClass:"dialog-tips"},[t._v("如认为数据表未载入成功，可在此处校验并刷新！")]),t._v(" "),l("el-input",{attrs:{placeholder:"请输入管理Key",type:"password"},model:{value:t.key,callback:function(l){t.key=l},expression:"key"}})],1):t._e(),t._v(" "),1==t.installStatus?l("div",{staticClass:"install-loading"},[l("p",[t._v("正在执行，请勿关闭窗口或刷新页面！")])]):t._e(),t._v(" "),2==t.installStatus?l("div",{staticClass:"install-data"},[l("div",{staticClass:"install-data-text"},[t._v("\n        "+t._s(t.installData)+"\n      ")])]):t._e(),t._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[0==t.installStatus?l("el-button",{on:{click:function(l){t.goInstall=!1}}},[t._v("取 消")]):t._e(),t._v(" "),0==t.installStatus?l("el-button",{attrs:{type:"primary"},on:{click:function(l){return t.goInstallStart()}}},[t._v("确 定")]):t._e(),t._v(" "),1==t.installStatus?l("el-button",{attrs:{type:"primary",loading:!0}},[t._v("执行中")]):t._e(),t._v(" "),2==t.installStatus?l("el-button",{attrs:{type:"danger"},on:{click:function(l){t.installStatus=0}}},[t._v("重 试")]):t._e(),t._v(" "),2==t.installStatus?l("el-button",{attrs:{type:"primary"},on:{click:function(l){t.goInstall=!1,t.installStatus=0}}},[t._v("完 成")]):t._e()],1)])],1)}),[],!1,null,null,null);l.default=component.exports}}]);