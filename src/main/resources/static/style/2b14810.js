(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{452:function(e,t,l){"use strict";l.r(t);var o={layout:"layout",head:function(){return{title:"内容模块配置"}},data:function(){return{key:"",form:{auditlevel:"0",contentAuditlevel:"0",forbidden:"",fields:"",disableCode:!1,allowDelete:!1,identifyPost:!1},isPro:0}},beforeDestroy:function(){},created:function(){},mounted:function(){var e=this;e.isPro=e.$api.isPro(),localStorage.getItem("webkey")?e.key=localStorage.getItem("webkey"):(e.$message({message:"认证失效！",type:"error"}),e.$router.push({path:"/"})),e.getConfig()},methods:{save:function(){var e=this,t=e.form;e.form.disableCode,t.disableCode,e.form.allowDelete,t.allowDelete;var data={webkey:e.key,params:JSON.stringify(t)},l=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$axios.$post(e.$api.apiConfigUpdate(),this.qs.stringify(data)).then((function(t){l.close(),1==t.code?(e.$message({message:t.msg,type:"success"}),e.getConfig()):e.$message({message:t.msg,type:"error"})})).catch((function(t){l.close(),console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfig:function(){var e=this,data={webkey:e.key};e.$axios.$post(e.$api.getApiConfig(),this.qs.stringify(data)).then((function(t){1==t.code&&(t.data.auditlevel&&(e.form.auditlevel=t.data.auditlevel+""),t.data.contentAuditlevel&&(e.form.contentAuditlevel=t.data.contentAuditlevel+""),e.form.forbidden=t.data.forbidden,e.form.fields=t.data.fields,1==t.data.disableCode?e.form.disableCode=!0:e.form.disableCode=!1,1==t.data.allowDelete?e.form.allowDelete=!0:e.form.allowDelete=!1,1==t.data.identifyPost?e.form.identifyPost=!0:e.form.identifyPost=!1)})).catch((function(t){console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},goUtf8mb4:function(){var e=this,t=this;t.$confirm("将为所有内容字段开启Utf8mb4支持，此操作不可逆！","API警告",{confirmButtonText:"马上执行",cancelButtonText:"我再想想",type:"warning"}).then((function(){var data={webkey:t.key},l=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t.$axios.$post(t.$api.toUtf8mb4(),e.qs.stringify(data)).then((function(e){l.close(),1==e.code?(t.$message({message:e.msg,type:"success"}),t.getConfig()):t.$message({message:e.msg,type:"error"})})).catch((function(e){l.close(),console.log(e),t.$message({message:"接口请求异常，请检查网络！",type:"error"})}))})).catch((function(){}))}}},r=l(26),component=Object(r.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"data-box"},[t("div",{staticClass:"page-title"},[t("h4",[e._v("内容模块配置")]),e._v(" "),t("p",[e._v("配置内容模块相关参数和功能开关。")])]),e._v(" "),t("div",{staticClass:"page-form"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"80px"}},[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("评论审核等级"),t("span",[e._v("管理人员发布无需审核")])]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择评论审核等级"},model:{value:e.form.auditlevel,callback:function(t){e.$set(e.form,"auditlevel",t)},expression:"form.auditlevel"}},[t("el-option",{attrs:{label:"直接发布",value:"0"}}),e._v(" "),t("el-option",{attrs:{label:"第一次评论审核",value:"1"}}),e._v(" "),t("el-option",{attrs:{label:"违禁词匹配审核",value:"2"}}),e._v(" "),t("el-option",{attrs:{label:"违禁词匹配拦截",value:"3"}}),e._v(" "),t("el-option",{attrs:{label:"默认全部审核",value:"4"}})],1)],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("内容审核等级"),t("span",[e._v("管理人员发布无需审核")])]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择内容审核等级"},model:{value:e.form.contentAuditlevel,callback:function(t){e.$set(e.form,"contentAuditlevel",t)},expression:"form.contentAuditlevel"}},[t("el-option",{attrs:{label:"直接发布",value:"0"}}),e._v(" "),t("el-option",{attrs:{label:"违禁词匹配审核",value:"1"}}),e._v(" "),t("el-option",{attrs:{label:"默认全部审核",value:"2"}})],1)],1),e._v(" "),e.isPro>0?t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("禁止非认证发布"),t("span",[e._v("开启后，未完成实名认证用户将无法发布任何内容")])]),e._v(" "),t("el-switch",{model:{value:e.form.identifyPost,callback:function(t){e.$set(e.form,"identifyPost",t)},expression:"form.identifyPost"}})],1):e._e(),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("违禁词"),t("span",[e._v("违禁词将用于评论审核，个性签名拦截。根据英文逗号”,“进行分割，不要存在换行或者空格。")])]),e._v(" "),t("el-input",{attrs:{type:"textarea",placeholder:"请输入违禁词"},model:{value:e.form.forbidden,callback:function(t){e.$set(e.form,"forbidden",t)},expression:"form.forbidden"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("文章自定义字段"),t("span",[e._v("输入字段的名称，根据英文逗号”,“进行分割。配置后，可通过自定义字段接口为文章设置自定义字段。")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入文章自定义字段"},model:{value:e.form.fields,callback:function(t){e.$set(e.form,"fields",t)},expression:"form.fields"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("敏感代码禁用模式"),t("span",[e._v("开启后，则发布文章，商品，评论，都将禁用js或者嵌套代码")])]),e._v(" "),t("el-switch",{model:{value:e.form.disableCode,callback:function(t){e.$set(e.form,"disableCode",t)},expression:"form.disableCode"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("用户删除权限"),t("span",[e._v("允许用户删除自己的内容（评论，文章）")])]),e._v(" "),t("el-switch",{model:{value:e.form.allowDelete,callback:function(t){e.$set(e.form,"allowDelete",t)},expression:"form.allowDelete"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("Utf8mb4支持"),t("span",[t("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.goUtf8mb4()}}},[e._v("点击此处开启")]),e._v(" 开启后，内容字段将变为Utf8mb4编码，支持emoji表情等特殊符号，但可能会占用更多的数据库空间。")])])]),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存设置")])],1)],1)],1)])])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);