(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{460:function(e,t,l){"use strict";l.r(t);var o={layout:"layout",head:function(){return{title:"OSS上传配置"}},data:function(){return{key:"",form:{aliyunEndpoint:"",aliyunAccessKeyId:"",aliyunAccessKeySecret:"",aliyunAucketName:"",aliyunUrlPrefix:"",aliyunFilePrefix:""}}},beforeDestroy:function(){},created:function(){},mounted:function(){var e=this;localStorage.getItem("webkey")?e.key=localStorage.getItem("webkey"):(e.$message({message:"认证失效！",type:"error"}),e.$router.push({path:"/"})),e.getConfig()},methods:{save:function(){var e=this,t=e.form,data={webkey:e.key,params:JSON.stringify(t)},l=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$axios.$post(e.$api.apiConfigUpdate(),this.qs.stringify(data)).then((function(t){l.close(),1==t.code?(e.$message({message:t.msg,type:"success"}),e.getConfig()):e.$message({message:t.msg,type:"error"})})).catch((function(t){l.close(),console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfig:function(){var e=this,data={webkey:e.key};e.$axios.$post(e.$api.getApiConfig(),this.qs.stringify(data)).then((function(t){1==t.code&&(e.form.aliyunEndpoint=t.data.aliyunEndpoint,e.form.aliyunAccessKeyId=t.data.aliyunAccessKeyId,e.form.aliyunAccessKeySecret=t.data.aliyunAccessKeySecret,e.form.aliyunAucketName=t.data.aliyunAucketName,e.form.aliyunUrlPrefix=t.data.aliyunUrlPrefix,e.form.aliyunFilePrefix=t.data.aliyunFilePrefix)})).catch((function(t){console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))}}},n=l(26),component=Object(n.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"data-box"},[t("div",{staticClass:"page-title"},[t("h4",[e._v("OSS上传配置")]),e._v(" "),t("p",[e._v("OSS为阿里云对象存储，和其它上传方式四选一配置即可，"),t("a",{attrs:{href:"https://help.aliyun.com/document_detail/31947.html",target:"_blank"}},[e._v("官方文档")])])]),e._v(" "),t("div",{staticClass:"page-form"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"80px"}},[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("地域节点Endpoint"),t("span",[e._v("地域节点域名：如oss-cn-beijing.aliyuncs.com")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入地域节点Endpoint"},model:{value:e.form.aliyunEndpoint,callback:function(t){e.$set(e.form,"aliyunEndpoint",t)},expression:"form.aliyunEndpoint"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("AccessKeyId")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入AccessKeyId"},model:{value:e.form.aliyunAccessKeyId,callback:function(t){e.$set(e.form,"aliyunAccessKeyId",t)},expression:"form.aliyunAccessKeyId"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("AccessKeySecret")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入地域节点Bucket"},model:{value:e.form.aliyunAccessKeySecret,callback:function(t){e.$set(e.form,"aliyunAccessKeySecret",t)},expression:"form.aliyunAccessKeySecret"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("存储桶名称BucketName")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入存储桶名称BucketName"},model:{value:e.form.aliyunAucketName,callback:function(t){e.$set(e.form,"aliyunAucketName",t)},expression:"form.aliyunAucketName"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("访问地址"),t("span",[e._v("对象存储外网访问地址，格式为https://外网域名/，末尾记得加斜杆")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入对象存储外网访问地址"},model:{value:e.form.aliyunUrlPrefix,callback:function(t){e.$set(e.form,"aliyunUrlPrefix",t)},expression:"form.aliyunUrlPrefix"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("文件夹名称"),t("span",[e._v("直接输入名称，不要加斜杠")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入文件夹名称"},model:{value:e.form.aliyunFilePrefix,callback:function(t){e.$set(e.form,"aliyunFilePrefix",t)},expression:"form.aliyunFilePrefix"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存设置")])],1)],1)],1)])])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);